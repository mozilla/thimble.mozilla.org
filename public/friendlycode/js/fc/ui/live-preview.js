// Displays the HTML source of a CodeMirror editor as a rendered preview
// in an iframe.
define(["jquery", "backbone-events"], function($, BackboneEvents) {
  "use strict";

  var Preferences = require("fc/prefs"),
      showMappings = true,
      updateFrame = function(bool) {};

  function LivePreview(options) {
    var self = {codeMirror: options.codeMirror, title: ""},
        codeMirror = options.codeMirror,
        telegraph,        // communication channel to the preview iframe
        knownDoc,         // the latest known document generated by slowparse
        findElementRoute; // route finder in the knownDoc

    var setViewLink = self.setViewLink = function(link) {
      self.trigger("change:viewlink", link);
    };

    BackboneEvents.mixin(self);
    return self;
  }

  return LivePreview;
});

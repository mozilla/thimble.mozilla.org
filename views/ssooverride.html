{% block ssooverride %}
    <script>
    /**
     * This code ensures the "publish" button is only
     * visible when the user is logged in according
     * the persona SSO that we employ for webmaker.org
     */
    define( "ssooverride", [
      "jquery",
      "thimblePage"
    ], function($, ThimblePage) {
      var buttons = $('.save-button, .publish-button'),
          saveButton = $('.save-button'),
          publishButton = $('.publish-button'),
          loggedIn = false;

      function enable() {
        buttons.attr("disabled", false).attr("title", '');
      };

      function disable() {
        buttons.attr("disabled", true);
        saveButton.attr("title", "{{ gettext("Login to save") }}");
        publishButton.attr("title", "{{ gettext("Login to publish") }}");
      }

      disable();

      navigator.idSSO.app = {
        onlogin: function(loggedInUser, displayName) {
          enable();
        },
        onlogout: function() {
          disable();
        }
      };
    });
    </script>
{% endblock %}
